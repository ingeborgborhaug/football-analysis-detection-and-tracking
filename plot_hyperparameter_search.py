import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
from mpl_toolkits.mplot3d import Axes3D
from io import StringIO


raw_data = """
max_age,n_init,max_iou_distance,mota,num_switches
6,8,0.5,0.834542,66
6,8,0.8,0.846582,54
6,8,0.9,0.849189,52
6,8,1.0,0.799891,85
6,10,0.5,0.835016,62
6,10,0.8,0.852081,48
6,10,0.9,0.855281,45
6,10,1.0,0.815842,72
6,12,0.5,0.834755,60
6,12,0.8,0.854830,44
6,12,0.9,0.858267,42
6,12,1.0,0.825607,68
6,15,0.5,0.835182,60
6,15,0.8,0.862012,40
6,15,0.9,0.865875,38
6,15,1.0,0.835988,53
8,8,0.5,0.826460,65
8,8,0.8,0.838974,52
8,8,0.9,0.840965,52
8,8,1.0,0.783869,91
8,10,0.5,0.827337,62
8,10,0.8,0.845089,46
8,10,0.9,0.847459,45
8,10,1.0,0.800886,80
8,12,0.5,0.829352,60
8,12,0.8,0.849355,43
8,12,0.9,0.852057,42
8,12,1.0,0.812856,70
8,15,0.5,0.833665,60
8,15,0.8,0.857366,40
8,15,0.9,0.860471,39
8,15,1.0,0.821175,58
10,8,0.5,0.817762,64
10,8,0.8,0.830631,55
10,8,0.9,0.832575,55
10,8,1.0,0.758817,91
10,10,0.5,0.822478,58
10,10,0.8,0.840064,48
10,10,0.9,0.842245,47
10,10,1.0,0.779816,77
10,12,0.5,0.826365,52
10,12,0.8,0.845137,45
10,12,0.9,0.847649,44
10,12,1.0,0.804584,71
10,15,0.5,0.834684,52
10,15,0.8,0.854712,42
10,15,0.9,0.857556,41
10,15,1.0,0.813993,61
15,8,0.5,0.803114,72
15,8,0.8,0.815984,55
15,8,0.9,0.817999,55
15,8,1.0,0.736941,86
15,10,0.5,0.809774,68
15,10,0.8,0.828546,49
15,10,0.9,0.830868,48
15,10,1.0,0.750119,74
15,12,0.5,0.815913,59
15,12,0.8,0.835751,45
15,12,0.9,0.837955,44
15,12,1.0,0.773346,72
15,15,0.5,0.825749,58
15,15,0.8,0.847507,42
15,15,0.9,0.850090,41
15,15,1.0,0.791311,65
"""

# Read the CSV data
df = pd.read_csv(StringIO(raw_data))

# Create a 3D scatter plot
fig = plt.figure(figsize=(10, 8))
ax = fig.add_subplot(111, projection='3d')

scatter = ax.scatter(
    df['max_age'],
    df['n_init'],
    df['max_iou_distance'],
    c=df['mota'],
    cmap='viridis',
    s=60
)

ax.set_xlabel('Max Age')
ax.set_ylabel('N Init')
ax.set_zlabel('IoU Distance')
ax.set_title('3D Scatter Plot of Hyperparameters vs MOTA')
fig.colorbar(scatter, ax=ax, label='MOTA')

plt.tight_layout()
plt.savefig('hyperparameter_mota_3d.png')